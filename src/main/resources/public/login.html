<!DOCTYPE>
<html lang="pl">
<head>
    <title>Login</title>
    <script src="redirectLoggedUser.js"></script>
</head>
<body>
    <form id="myForm">
        <label for="name">Name</label>
        <input type="text" name="name" id="name">

        <label for="password">Password</label>
        <input type="password" name="password" id="password">
        <input type="submit">
    </form>
    <button onclick="location.href='register.html'">Register</button>

    <script>

        const myForm = document.getElementById('myForm');

        myForm.addEventListener('submit', event =>{
            event.preventDefault();

            const formData = new FormData(myForm);
            const data = Object.fromEntries(formData);

            fetch("api/user/login", {
                method: 'post',
                body: JSON.stringify(data),
                headers:{
                    'Content-Type':'application/json'
                }
            }).then(response =>{
                if (response.ok) {
                    window.location.href = "notes.html";
                }
            });
        })
    </script>
</body>
</html>